const { createTrigger } = require("ohj").triggers;


let EPLTrigger = (eplExpression, triggerName) => createTrigger("esper.EPLExpressionTrigger", triggerName, {
    "expression": eplExpression
});

class EPLTriggerConfig {
    constructor(eplExpression) {
        this.eplExpression = eplExpression;
        this._complete = () => true
        this._toOHTriggers = () => [EPLTrigger(this.eplExpression)]
        this.describe = (compact) => compact ? "<EPL>" : `matches epl expression: "${this.eplExpression}"`
    }
};

module.exports = {
    epl: (exp) => new EPLTriggerConfig(exp)
}